(function(){"use strict";function a(a){var c=a.eClass;if(c){var d=c.get("eAllStructuralFeatures");t.each(d,function(c){b(a,c)})}}function b(a,b){if(a&&b){var c=b.get("name"),d=b.values.defaultValue,e=b.get("upperBound"),f=!0===b.values.derived,g=(b.values.containment,a.values[c]);null!==g&&void 0!==g||(f?a.values[c]=b.values._:1!==e&&e?g instanceof u.EList?g._setFeature(b):b.isTypeOf("EAttribute")?a.values[c]=[]:a.values[c]=new u.EList(a,b):a.values[c]=function(){return null===d||void 0===d?null:0===d?0:!1!==d&&d}())}}function c(a,b){return t.find(a.get("eAllStructuralFeatures"),function(a){return a.values.name===b})}function d(a,b){if(a.eClass){var d=function(a,b){return"function"==typeof b?b:b instanceof w?b:u.create(a,b)},e=function(b,c,e,f){e?a.set(b,d(f,c)):a.set(b,c)},f=function(b,c,e,f){var g=t.isArray(c)?c:[c];t.each(g,function(c){e?a.get(b).add(d(f,c)):a.get(b).push(c)})};t.each(b,function(a,b){var d=c(this.eClass,b);d&&void 0!==a&&(1===d.get("upperBound")?e(b,a,d.eClass===u.EReference,d.get("eType")):f(b,a,d.eClass===ia,d.get("eType")))},a)}}function e(a){var b=a.get("eOperations").array(),c=a.get("eAllSuperTypes");return t.flatten(t.union(b||[],t.map(c||[],function(a){return e(a)})))}function f(a){if(a&&a.eClass){var b=e(a.eClass);b&&t.each(b,function(b){a[b.get("name")]=b._})}}function g(a){var b={},c=a.get("contents").array();if(c.length){var d,e,f=function(a,c){var d=a.eContents();b[c]=a,t.each(d,function(a){f(a,a.fragment())})};if(1===c.length)d=c[0],d._id?f(d,d._id):(e=d.eClass.get("eIDAttribute")||null,e?f(d,d.get(e.get("name"))):f(d,"/"));else for(var g=0;g<c.length;g++)d=c[g],d._id?f(d,d._id):(e=d.eClass.get("eIDAttribute")||null,e?f(d,d.get(e.get("name"))):f(d,"/"+g))}return b}function h(a){return!a.get("abstract")}function i(a){if(!a||!a.eClass)return[];var b=a.get("eAllSubTypes");return t.filter(t.union([a],b),h)}function j(a,b){if(!a)return[];var c=a.eClass.get("eAllContainments"),d=function(c){var d=i(c.get("eType"));return b&&"function"==typeof b?b(a,c,d):d};return t.flatten(t.map(c,d))}function k(a,b){return a?j(a.eContainer,b):[]}function l(a,b,c){return t.map(c,function(c){return{label:"New "+c.get("name"),owner:a,feature:b,type:c}})}function m(a){return j(a,l)}function n(a){return k(a,l)}function o(a){return a.get("name")||""}function p(a){var b=a.get("eType"),c=a.eClass===u.EOperation,d=b?b.get("name"):null;return a.get("name")+(c?"()":"")+(d?" : "+d:"")}function q(a,b){if(null==a||null==a.eResource()||null==a.eResource().get("resourceSet"))throw new Error("Bad argument");var c=b.get("eType"),d=a.eResource().get("resourceSet"),e=d.elements();return t.filter(e,function(a){return a.isKindOf(c)})}function r(a){var b=/(>)(<)(\/*)/g,c=/ *([^ ].*[^ ]) *\n/g,d=/(<.+>)(.+\n)/g;a=a.replace(b,"$1\n$2$3").replace(c,"$1\n").replace(d,"$1\n$2");for(var e="",f=a.split("\n"),g=0,h="other",i={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},j=0;j<f.length;j++){var k=f[j],l=Boolean(k.match(/<.+\/>/)),m=Boolean(k.match(/<\/.+>/)),n=Boolean(k.match(/<[^!].*>/)),o=l?"single":m?"closing":n?"opening":"other",p=h+"->"+o;h=o;var q="";g+=i[p];for(var r=0;r<g;r++)q+="    ";e+=q+k+"\n"}return e}var s=this,t=s._;t||"undefined"==typeof require||(t=require("underscore"));var u={create:function(a,b){var c;if(b?(c=b,c.eClass=b.eClass||a):a instanceof w?(c={},c.eClass=a):c=a,!c.eClass||c.eClass.get("abstract"))throw new Error("Cannot create EObject from undefined or abstract EClass");return new w(c)}};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.Ecore=u):s.Ecore=u;var v={on:function(a,b,c){var d,e,f;if(!b)return this;for(a=a.split(/\s+/),d=this._callbacks||(this._callbacks={});e=a.shift();)f=d[e]||(d[e]=[]),f.push(b,c);return this},off:function(a,b,c){var d,e,f,g;if(!(e=this._callbacks))return this;if(!(a||b||c))return delete this._callbacks,this;for(a=a?a.split(/\s+/):t.keys(e);d=a.shift();)if((f=e[d])&&(b||c))for(g=f.length-2;g>=0;g-=2)b&&f[g]!==b||c&&f[g+1]!==c||f.splice(g,2);else delete e[d];return this},trigger:function(a){var b,c,d,e,f,g,h,i;if(!(c=this._callbacks))return this;for(i=[],a=a.split(/\s+/),e=1,f=arguments.length;e<f;e++)i[e-1]=arguments[e];for(;b=a.shift();){if((h=c.all)&&(h=h.slice()),(d=c[b])&&(d=d.slice()),d)for(e=0,f=d.length;e<f;e+=2)d[e].apply(d[e+1]||this,i);if(h)for(g=[b].concat(i),e=0,f=h.length;e<f;e+=2)h[e].apply(h[e+1]||this,g)}return this}},w=function(b){return b||(b={}),this.eClass=b.eClass,this.values={},b._&&(this._=b._),a(this),d(this,b),f(this),this};u.EObjectPrototype={setEClass:function(b){return this.eClass=b,a(this),d(this,this.values),f(this),this},create:function(a){if("EClass"===this.eClass.get("name"))return u.create(this,a)},has:function(a){return this.values.hasOwnProperty(a)||c(this.eClass,a)},isSet:function(a){if(!this.has(a))return!1;if(!this.eClass)return!1;var b=this.get(a);return b instanceof x?b.size()>0:null!==b&&void 0!==b},set:function(a,b){var d,e,f,g;if(null===a)return this;a.eClass&&(a=a.get("name")),t.isObject(a)||(e=a,(a={})[e]=b);var h=this.eResource();for(d in a)if(void 0!==(f=a[d])&&this.has(d)){this.isSet(d)&&this.unset(d);var i=c(this.eClass,d),j=i.get("containment"),k="containment"===d&&"string"==typeof f&&"EReference"===this.eClass.values.name;k&&(f="true"===f.toLowerCase()),this.values[d]=f,j&&(f.eContainingFeature=i,f.eContainer=this),g="change:"+d,this.trigger("change "+g,d),h&&h.trigger("change",this)}return this},unset:function(a,b){var d,e,f;if(null===a)return this;a.eClass&&(a=a.get("name")),t.isObject(a)||(e=a,(a={})[e]=void 0);var g=this.eResource();for(d in a)if(this.has(d)&&this.isSet(d)){var h=c(this.eClass,d),i=!0===Boolean(h.get("containment")),j=this.values[d];i&&(j.eContainingFeature=void 0,j.eContainer=void 0),this.values[d]=void 0,f="unset:"+d,this.trigger("unset "+f,d),g&&g.trigger("change",this)}return this},get:function(a){if(!a)return null;var d=a.eClass?a.get("name"):a;!t.has(this.values,d)&&this.has(d)&&b(this,c(this.eClass,d));var e=this.values[d];return"function"==typeof e?e.apply(this):e},isTypeOf:function(a){if(!a||!this.eClass)return!1;var b=a.eClass?a.get("name"):a;return this.eClass.get("name")===b},isKindOf:function(a){if(!a||!this.eClass)return!1;if(this.isTypeOf(a))return!0;var b=a.eClass?a.get("name"):a,c=this.eClass.get("eAllSuperTypes");return t.any(c,function(a){return a.get("name")===b})},eResource:function(){return this.isKindOf("Resource")?this:this.eContainer?this.eContainer.isKindOf("Resource")?this.eContainer:this.eContainer.eResource():null},eContents:function(){if(!this.eClass)return[];if(t.isUndefined(this.__updateContents)){this.__updateContents=!0;var a=this.eResource();if(a){var b=this;a.on("add remove",function(){b.__updateContents=!0})}}if(this.__updateContents){var c=this.eClass.get("eAllStructuralFeatures"),d=t.filter(c,function(a){return a.isTypeOf("EReference")&&a.get("containment")&&this.isSet(a.get("name"))},this),e=null;this.__eContents=t.flatten(t.map(d,function(a){return e=this.get(a.get("name")),e?e.array?e.array():e:[]},this)),this.__updateContents=!1}return this.__eContents},eURI:function(){var a=this.eResource();return(a?a.get("uri"):"")+"#"+this.fragment()},fragment:function(){var a,b,c,d=this.eContainer,e=this.eClass,f=e.get("eIDAttribute");return d?f?this.get(f.get("name")):this._id?this._id:this.isKindOf("EModelElement")?d?d.isKindOf("Resource")?(b=d.get("contents"),b.size()>1?"/"+b.indexOf(this):"/"):d.fragment()+"/"+this.get("name"):"/":(d.isKindOf("Resource")?(b=d.get("contents"),c=b.size()>1?"/"+b.indexOf(this):"/"):(a=this.eContainingFeature)&&(c=d.fragment()+"/@"+a.get("name"),1!==a.get("upperBound")&&(c+="."+d.get(a.get("name")).indexOf(this))),c):null}},t.extend(w.prototype,u.EObjectPrototype,v);var x=u.EList=function(a,b){return this._internal=[],this._owner=a,this._size=0,this._setFeature(b),this};x.prototype={_setFeature:function(a){a&&(this._feature=a,this._isContainment=this._feature.get("containment"),t.each(this._internal,function(a){this._isContainment&&(a.eContainer=this._owner,a.eContainingFeature=this._feature)},this))},add:function(a){if(!a||!a instanceof w)return this;this._isContainment&&(a.eContainingFeature=this._feature,a.eContainer=this._owner),this._size++,this._internal.push(a);var b=this._owner.eResource(),c="add";return this._feature&&(c+=":"+this._feature.get("name")),this._owner.trigger(c,a),b&&b.trigger("add",this),this},addAll:function(){return t.each(t.flatten(arguments||[]),function(a){this.add(a)},this),this},remove:function(a){var b="remove",c=this._owner.eResource();return this._internal=t.without(this._internal,a),this._size=this._size-1,this._feature&&(b+=":"+this._feature.get("name")),this._owner.trigger(b,a),c&&c.trigger("remove",this),this},clear:function(){for(var a=this.array(),b=0;b<a.length;b++)this.remove(a[b]);return this},size:function(){return this._size},at:function(a){if(this._size<a)throw new Error("Index Out Of Range");return this._internal[a]},array:function(){return this._internal},first:function(){return t.first(this._internal)},last:function(){return t.last(this._internal)},rest:function(a){return t.rest(this._internal,a)},each:function(a,b){return t.each(this._internal,a,b)},filter:function(a,b){return t.filter(this._internal,a,b)},find:function(a,b){return t.find(this._internal,a,b)},map:function(a,b){return t.map(this._internal,a,b)},reject:function(a,b){return t.reject(this._internal,a,b)},contains:function(a){return t.contains(this._internal,a)},indexOf:function(a){return t.indexOf(this._internal,a)}};var y=new w,z=new w,A=new w,B=new w,C=new w,D=new w,E=new w,F=new w,G=new w,H=new w,I=new w,J=new w,K=new w,L=new w,M=new w,N=new w,O=new w;y.eClass=y,y.values={name:"EClass",abstract:!1,interface:!1,eStructuralFeatures:new u.EList(y),eOperations:new u.EList(y),eSuperTypes:new u.EList(y),eAllSuperTypes:function(){if(!this._eAllSuperTypes){var a=function(a){var b=a.get("eSuperTypes").array(),c=t.flatten(t.map(b,function(a){return a.get("eAllSuperTypes")}));return t.union(c,b)};this.on("add:eSuperTypes remove:eSuperTypes",function(){this._eAllSuperTypes=a(this)},this),this._eAllSuperTypes=a(this)}return this._eAllSuperTypes},eAllSubTypes:function(){var a,b,c;return c=this.eResource().get("resourceSet"),a=c?c.elements("EClass"):u.EPackage.Registry.elements("EClass"),b=t.filter(a,function(a){return t.contains(a.get("eAllSuperTypes"),this)},this),t.isArray(b)?b:[]},eReferences:function(){var a;return a=this.get("eStructuralFeatures"),a.filter(function(a){return a.isTypeOf("EReference")})},eAttributes:function(){var a;return a=this.get("eStructuralFeatures"),a.filter(function(a){return a.isTypeOf("EAttribute")})},eIDAttribute:function(){var a,b;return a=this.get("eAllAttributes"),b=t.filter(a,function(a){return!0===a.get("iD")}),t.isArray(b)?b[0]:null},eAllStructuralFeatures:function(){return function(a){var b,c,d;return d=a.get("eAllSuperTypes"),c=a.values.eStructuralFeatures.array(),b=t.flatten(t.map(d||[],function(a){return a.values.eStructuralFeatures.array()})),t.union(b||[],c||[])}(this)},eAllAttributes:function(){var a=this.get("eAllStructuralFeatures");return t.filter(a||[],function(a){return a.eClass===u.EAttribute})},eAllContainments:function(){var a=this.get("eAllStructuralFeatures");return t.filter(a,function(a){return a.eClass===u.EReference&&a.get("containment")})},eAllReferences:function(){var a=this.get("eAllStructuralFeatures");return t.filter(a,function(a){return a.eClass===u.EReference&&!a.get("containment")})}},K.values={name:"abstract",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:B},L.values={name:"interface",lowerBound:0,upperBound:1,defaultValueLiteral:"false",defaultValue:!1,eType:B},M.values={name:"eStructuralFeatures",lowerBound:0,upperBound:-1,containment:!0},O.values={name:"eSuperTypes",lowerBound:0,upperBound:-1,containment:!1},N.values={name:"eOperations",lowerBound:0,upperBound:-1,containment:!0},y.get("eStructuralFeatures").add(K).add(L).add(O).add(M).add(N);var P=new w;P.values={name:"eAllStructuralFeatures",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:y.values.eAllStructuralFeatures};var Q=new w;Q.values={name:"eAllSuperTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:y.values.eAllSuperTypes};var R=new w;R.values={name:"eAllSubTypes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:y.values.eAllSubTypes};var S=new w;S.values={name:"eAllAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:y.values.eAllAttributes};var T=new w;T.values={name:"eAllContainments",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:y.values.eAllContainments};var U=new w;U.values={name:"eAllReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:y.values.eAllReferences};var V=new w;V.values={name:"eReferences",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:y.values.eReferences};var W=new w;W.values={name:"eAttributes",lowerBound:0,upperBound:-1,derived:!0,containment:!1,_:y.values.eAttributes};var X=new w;X.values={name:"eIDAttribute",lowerBound:0,upperBound:1,derived:!0,containment:!1,_:y.values.eIDAttribute},y.get("eStructuralFeatures").add(P).add(Q).add(R).add(S).add(U).add(T).add(W).add(V).add(X),y.getEStructuralFeature=function(a){var b;return b=a.eClass?a.get("name"):a,t.find(this.get("eAllStructuralFeatures"),function(a){return a.get("name")===b})};var Y=new w;Y.values={name:"getEStructuralFeature",lowerBound:0,upperBound:1,eParameters:new u.EList(this)},Y._=y.getEStructuralFeature,y.get("eOperations").add(Y),y.values.eStructuralFeatures._setFeature(M),y.values.eSuperTypes._setFeature(O),y.values.eOperations._setFeature(N);var Z=y.create(),$=y.create(),_=y.create(),aa=y.create(),ba=y.create(),ca=y.create(),da=y.create(),ea=y.create(),fa=y.create(),ga=y.create(),ha=y.create(),ia=y.create(),ja=y.create(),ka=y.create(),la=y.create(),ma=y.create(),na=y.create();K.eClass=ha,L.eClass=ha,M.eClass=ia,M.values.eType=ga,O.eClass=ia,O.values.eType=y,N.eClass=ia,N.values.eType=ja,P.eClass=ia,P.values.eType=ga,Q.eClass=ia,Q.values.eType=y,R.eClass=ia,R.values.eType=y,S.eClass=ia,S.values.eType=ha,U.eClass=ia,U.values.eType=ia,T.eClass=ia,T.values.eType=ia,W.eClass=ia,W.values.eType=ha,V.eClass=ia,V.values.eType=ia,X.eClass=ia,X.values.eType=ha,Y.eClass=ja,Y.values.eType=ga,$.get("eSuperTypes").add(Z),_.get("eSuperTypes").add($),aa.get("eSuperTypes").add($),ba.get("eSuperTypes").add(aa),ca.get("eSuperTypes").add(aa),y.get("eSuperTypes").add(ca),da.get("eSuperTypes").add(ca),ea.get("eSuperTypes").add(da),la.get("eSuperTypes").add(aa),fa.get("eSuperTypes").add(aa),ga.get("eSuperTypes").add(fa),ha.get("eSuperTypes").add(ga),ia.get("eSuperTypes").add(ga),ja.get("eSuperTypes").add(fa),ka.get("eSuperTypes").add(fa),na.get("eSuperTypes").add(aa),ma.get("eSuperTypes").add(Z);var oa=new w,pa=new w,qa=new w,ra=new w,sa=new w,ta=new w,ua=new w;oa.eClass=ia,oa.values={name:"eType",lowerBound:0,upperBound:1,containment:!1,eType:ca},pa.eClass=ha,pa.values={name:"ordered",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:B},qa.eClass=ha,qa.values={name:"unique",lowerBound:0,upperBound:1,defaultValueLiteral:"true",defaultValue:!0,eType:B},ra.eClass=ha,ra.values={name:"lowerBound",lowerBound:0,upperBound:1,defaultValueLiteral:"0",defaultValue:0,eType:A},sa.eClass=ha,sa.values={name:"upperBound",lowerBound:0,upperBound:1,defaultValueLiteral:"1",defaultValue:1,eType:A},ta.eClass=ha,ta.values={name:"many",lowerBound:0,upperBound:1,eType:B,derived:!0,_:function(){return 1!==this.get("upperBound")}},ua.eClass=ha,ua.values={name:"required",lowerBound:0,upperBound:1,eType:B,derived:!0,_:function(){return 1===this.get("lowerBound")}},fa.get("eStructuralFeatures").add(oa).add(pa).add(qa).add(ra).add(sa).add(ta).add(ua);var va=new w;va.eClass=ia,va.values={name:"eAnnotations",eType:_,lowerBound:0,upperBound:-1,containment:!0},$.get("eStructuralFeatures").add(va);var wa=new w;wa.eClass=ha,wa.values={name:"name",lowerBound:0,upperBound:1,eType:z},aa.get("eStructuralFeatures").add(wa);var xa=ha.create({name:"changeable",eType:B}),ya=ha.create({name:"volatile",eType:B}),za=ha.create({name:"transient",eType:B}),Aa=ha.create({name:"defaultValueLiteral",eType:z}),Ba=ha.create({name:"defaultValue",eType:J,derived:!0}),Ca=ha.create({name:"unsettable",eType:B}),Da=ha.create({name:"derived",eType:B});ga.get("eStructuralFeatures").add(xa).add(ya).add(za).add(Aa).add(Ba).add(Ca).add(Da),Ba.set({derived:!0});var Ea=ha.create({name:"containment",eType:B}),Fa=ha.create({name:"container",eType:B}),Ga=ha.create({name:"resolveProxies",eType:B}),Ha=ia.create({name:"eOpposite",eType:ia});ia.get("eStructuralFeatures").add(Ea).add(Fa).add(Ga).add(Ha);var Ia=ha.create({name:"iD",eType:B});ha.get("eStructuralFeatures").add(Ia),Z.set({name:"EObject"}),$.set({name:"EModelElement",abstract:!0}),_.set({name:"EAnnotation"}),aa.set({name:"ENamedElement",abstract:!0}),ba.set({name:"EPackage"}),ca.set({name:"EClassifier",abstract:!0}),da.set({name:"EDataType"}),ea.set({name:"EEnum"}),fa.set({name:"ETypedElement",abstract:!0}),ga.set({name:"EStructuralFeature",abstract:!0}),ha.set({name:"EAttribute"}),ia.set({name:"EReference"}),ja.set({name:"EOperation"}),ka.set({name:"EParameter"}),la.set({name:"EEnumLiteral"}),na.set({name:"ETypeParameter"}),ma.set({name:"EGenericType"});var Ja=ia.create({name:"eParameters",eType:ka,containment:!0,lowerBound:0,upperBound:-1});ja.get("eStructuralFeatures").add(Ja);var Ka=ia.create({name:"eLiterals",eType:la,containment:!0,lowerBound:0,upperBound:-1});ea.get("eStructuralFeatures").add(Ka),la.get("eStructuralFeatures").add(ha.create({name:"literal",eType:z})).add(ha.create({name:"value",eType:A}));var La=y.create({name:"EStringToStringMapEntry"}),Ma=ha.create({name:"key",lowerBound:0,upperBound:1,eType:z}),Na=ha.create({name:"value",lowerBound:0,upperBound:1,eType:z});La.get("eStructuralFeatures").add(Ma).add(Na);var Oa=ha.create({name:"source",upperBound:1,lowerBound:0,eType:z}),Pa=ia.create({name:"details",upperBound:-1,lowerBound:0,containment:!0,eType:La});_.get("eStructuralFeatures").add(Oa).add(Pa);var Qa=ia.create({name:"eTypeParameter",eType:na,containment:!1,lowerBound:0,upperBound:1}),Ra=ia.create({name:"eUpperBound",containment:!0,eType:ma}),Sa=ia.create({name:"eLowerBound",containment:!0,eType:ma}),Ta=ia.create({name:"eTypeArguments",containment:!0,upperBound:-1,eType:ma}),Ua=ia.create({name:"eClassifier",eType:ca});ma.get("eStructuralFeatures").add(Qa).add(Ra).add(Sa).add(Ta).add(Ua);var Va=ia.create({name:"eGenericType",upperBound:1,containment:!0,eType:ma});fa.get("eStructuralFeatures").add(Va);var Wa=ia.create({name:"eGenericSuperTypes",upperBound:-1,containment:!0,eType:ma});y.get("eStructuralFeatures").add(Wa);var Xa=ia.create({name:"eGenericExceptions",upperBound:-1,containment:!0,eType:ma});ja.get("eStructuralFeatures").add(Xa);var Ya=ia.create({name:"eBounds",containment:!0,upperBound:-1,eType:ma}),Za=ia.create({name:"eGenericTypes",containment:!1,upperBound:-1,eType:ma});na.get("eStructuralFeatures").add(Ya).add(Za);var $a=ia.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:na});ca.get("eStructuralFeatures").add($a);var _a=ia.create({name:"eTypeParameters",upperBound:-1,containment:!0,eType:na});ja.get("eStructuralFeatures").add(_a),z.eClass=da,z.set({name:"EString"}),A.eClass=da,A.set({name:"EInt"}),B.eClass=da,B.set({name:"EBoolean"}),D.eClass=da,D.set({name:"EDate"}),C.eClass=da,C.set({name:"EDouble"}),E.eClass=da,E.set({name:"EIntegerObject"}),F.eClass=da,F.set({name:"EFloatObject"}),G.eClass=da,G.set({name:"ELongObject"}),H.eClass=da,H.set({name:"EMap"}),I.eClass=da,I.set({name:"EDiagnosticChain"}),J.eClass=da,J.set({name:"JSObject"}),u.ELong=da.create({name:"ELong"}),u.EFloat=da.create({name:"EFloat"}),u.EShort=da.create({name:"EShort"}),u.EDoubleObject=da.create({name:"EDoubleObject"});var ab=ia.create({name:"eClassifiers",lowerBound:0,upperBound:-1,containment:!0,eType:ca}),bb=ia.create({name:"eSubPackages",lowerBound:0,upperBound:-1,containment:!0,eType:ba});ba.get("eStructuralFeatures").add(ha.create({name:"nsURI",eType:z})).add(ha.create({name:"nsPrefix",eType:z})).add(ab).add(bb),u.EcorePackage=ba.create({name:"ecore",nsPrefix:"ecore",nsURI:"http://www.eclipse.org/emf/2002/Ecore"}),u.EcorePackage.get("eClassifiers").add(Z).add($).add(_).add(aa).add(ba).add(ca).add(y).add(da).add(fa).add(ga).add(ha).add(ia).add(ja).add(ka).add(ea).add(la).add(na).add(ma).add(La).add(z).add(B).add(A).add(C).add(E).add(F).add(G).add(H).add(I).add(D).add(u.EShort).add(u.EFloat).add(u.ELong).add(u.EDoubleObject).add(J),u.EObject=Z,u.EModelElement=$,u.EClass=y,u.EClassifier=ca,u.EAnnotation=_,u.EStringToStringMapEntry=La,u.EPackage=ba,u.ETypedElement=fa,u.ENamedElement=aa,u.EStructuralFeature=ga,u.EAttribute=ha,u.EReference=ia,u.EEnum=ea,u.EEnumLiteral=la,u.EDataType=da,u.EOperation=ja,u.EParameter=ka,u.ETypeParameter=na,u.EGenericType=ma,u.EString=z,u.EBoolean=B,u.EInt=A,u.EDouble=C,u.EIntegerObject=E,u.EFloatObject=F,u.ELongObject=G,u.EMap=H,u.EDiagnosticChain=I,u.EDate=D,u.JSObject=J,u.EPackage.Registry={_ePackages:{},getEPackage:function(a){return this._ePackages[a]},register:function(a){if(!a.isSet("nsURI"))throw new Error("Cannot register EPackage without nsURI");a.get("eSubPackages").each(function(a){register(a)}),this._ePackages[a.get("nsURI")]=a},ePackages:function(){return t.values(this._ePackages)},elements:function(a){var b=function(b){return!a||(a.eClass?b.eClass===a:b.eClass.get("name")===a)},c=this.ePackages(),d=function(a){return t.map(a.eContents(),function(a){return[a,d(a)]})},e=function(a){return d(a)},f=[c,t.map(c,e)];return f=t.flatten(f),f=t.filter(f,b)}},u.EPackage.Registry.register(u.EcorePackage),u.JSON={dataType:"json",contentType:"application/json",parse:function(a,b){function c(a,b){return a&&b?function(c){if(c&&!c.get("derived")){var d=c.get("name"),g=a[d];if(void 0!==g)if(c.isTypeOf("EAttribute"))b.set(d,g);else if(c.get("containment")){var h=c.get("eType");1===c.get("upperBound")?b.set(d,e(g,h)):t.each(g||[],function(a){b.get(d).add(e(a,h))})}else f.push({parent:b,feature:c,value:g})}}:function(){}}function d(a,b){if(a.source&&b.set("source",a.source),a.details)if(t.isArray(a.details));else{var c=b.get("details");t.each(a.details,function(a,b){c.add(u.EStringToStringMapEntry.create({key:b,value:a}))})}}function e(a,b){var e;if(a&&(b||a.eClass)){a.eClass&&(b=h.getEObject(a.eClass));try{e=u.create(b)}catch(b){throw new Error("Cannot parse or cannot find EClass for object"+JSON.stringify(a))}e&&(a._id&&(e._id=a._id),b===u.EAnnotation?d(a,e):t.each(b.get("eAllStructuralFeatures"),c(a,e)))}return e}t.isString(b)&&(b=JSON.parse(b));var f=[],h=a.get("resourceSet")||u.ResourceSet.create();t.isArray(b)?t.each(b,function(b){a.add(e(b))}):a.add(e(b)),function(){function b(a,b,d,e){var f=d.$ref,g=c[f];g||(g=h.getEObject(f)),g&&(e?a.get(b.get("name")).add(g):a.set(b.get("name"),g))}var c=g(a);t.each(f,function(a){var c=a.parent,d=a.feature,e=a.value;1===d.get("upperBound")?b(c,d,e,!1):t.each(t.isArray(e)?e:[e],function(a){b(c,d,a,!0)})})}()},to:function(a){function b(a,b){var c=b.eResource(),d=a.eResource(),e=c!==d;if(c&&d){i[c.get("uri")]||(i[c.get("uri")]=g(c));var f=i[c.get("uri")];for(var h in f)if(f[h]===b)return e?c.get("uri")+"#"+h:h;return null}}function c(a,c,d){return!0===d?f(c):{$ref:b(a,c),eClass:c.eClass.eURI()}}function d(a,b){return a&&b?function(d,e){if("_"!==e[0]){var f=a.eClass.getEStructuralFeature(e),g=a.isSet(e);if(f&&g&&!f.get("derived")){var h=d,i=f.get("name"),j=1!==f.get("upperBound"),k=f.get("containment");f.isTypeOf("EAttribute")?b[i]=h:j?(b[i]=[],h.each(function(d){b[i].push(c(a,d,k))})):b[i]=c(a,h,k)}}}:function(){}}function e(a,b){a.values.source&&(b.source=a.values.source),a.values.details&&a.values.details.size()>0&&(b.details={},a.values.details.each(function(a){var c=a.get("key"),d=a.get("value");c&&(b.details[c]=d)}))}function f(a){var b=a.eClass,c=a.values,f={eClass:b.eURI()};return a._id&&(f._id=a._id),b===u.EAnnotation?e(a,f):t.each(c,d(a,f)),f}var h=a.get("contents").array(),i={};i[a.get("uri")]=g(a);var j;if(1===h.length){j=f(h[0])}else{j=[];for(var k=0;k<h.length;k++)j.push(f(h[k]))}return j}};var cb=u.Resource=u.EClass.create({name:"Resource",eSuperTypes:[u.EObject],eStructuralFeatures:[{eClass:u.EAttribute,name:"uri",lowerBound:1,upperBound:1,eType:u.EString},{eClass:u.EReference,name:"contents",upperBound:-1,containment:!0,eType:u.EObject},{eClass:u.EReference,name:"resourceSet",upperBound:1,lowerBound:0,eType:u.ResourceSet}],eOperations:[{eClass:u.EOperation,name:"add",_:function(a){return a||a.eClass?(a.eContainer=this,this.get("contents").add(a),this):this}},{eClass:u.EOperation,name:"clear",_:function(){return this.get("contents").clear(),this}},{eClass:u.EOperation,name:"addAll",_:function(a){return t.isArray(a)&&t.each(a,function(a){this.add(a)},this),this}},{eClass:u.EOperation,name:"getEObject",eType:u.EObject,_:function(a){return a?this._index()[a]?this._index()[a]:void 0:null}},{eClass:u.EOperation,name:"each",_:function(a,b){return this.get("contents").each(a,b)}},{eClass:u.EOperation,name:"to",_:function(a,b){return a&&"function"==typeof a.to?a.to(this,b):u.JSON.to(this)}},{eClass:u.EOperation,name:"parse",_:function(a,b){return b&&"function"==typeof b.parse?b.parse(this,a):u.JSON.parse(this,a),this}},{eClass:u.EOperation,name:"save",_:function(a,b){b||(b={});var c,d=b.format?b.format:u.JSON;try{c=this.to(d)}catch(b){a(null,b)}a(c,null)}},{eClass:u.EOperation,name:"load",_:function(a,b,c){c||(c={});var d=c.format||u.JSON;this.get("resourceSet");try{this.parse(a,d)}catch(a){b(null,a)}this.trigger("change"),"function"==typeof b&&b(this,null)}},{eClass:u.EOperation,name:"remove",_:function(){var a=this.get("resourceSet");a&&a.get("resources").remove(this),this.clear()}},{eClass:u.EOperation,name:"_index",eType:J,_:function(){if(t.isUndefined(this.__updateIndex)){var a=this;a.__updateIndex=!0,a.on("add remove",function(){a.__updateIndex=!0})}return this.__updateIndex&&(this.__index=g(this),this.__updateIndex=!1),this.__index}}]}),db=function(){this.uriMap={}};db.prototype={map:function(a,b){this.uriMap[a]=b},normalize:function(a){var b=a.split("#"),c=b[0],d=this.uriMap[c];if(d)return d;var e,f,g=c.lastIndexOf("/")+1;return(e=c.slice(0,g))===c?a:(f=c.slice(g,c.length),this.normalize(e)+f)}};var eb=u.ResourceSet=u.EClass.create({name:"ResourceSet",eSuperTypes:[u.EObject],eStructuralFeatures:[{eClass:u.EAttribute,name:"uri",upperBound:1,lowerBound:0,eType:u.EString},{eClass:u.EReference,name:"resources",upperBound:-1,containment:!0,eType:cb}],eOperations:[{eClass:u.EOperation,eType:u.Resource,upperBound:1,name:"create",_:function(a){var b=t.isObject(a)?a:{uri:a};if(!b.uri)throw new Error("Cannot create Resource, missing URI parameter");var c=this.get("resources").find(function(a){return a.get("uri")===b.uri});return c||(c=u.Resource.create(b),c.set("resourceSet",this),this.get("resources").add(c),this.trigger("add",c),c)}},{eClass:u.EOperation,eType:u.EObject,upperBound:1,name:"getEObject",_:function(a){var b,c=a.split("#"),d=c[0],e=c[1];if(!e)return null;var f=u.EPackage.Registry.getEPackage(d);return f&&((b=f.eResource())||(b=this.create({uri:d}),b.add(f),this.get("resources").add(b),b.set("resourceSet",this))),b?b.getEObject(e):(b=this.get("resources").find(function(a){return a.get("uri")===d}),b?b.getEObject(e):null)}},{eClass:u.EOperation,eType:u.EObject,upperBound:-1,name:"elements",_:function(a){var b=function(b){return!a||b.isKindOf(a)},c=this.get("resources").map(function(a){return t.filter(t.values(a._index()),b)});return t.flatten(c)}},{eClass:u.EOperation,eType:u.JSObject,upperBound:1,name:"uriConverter",_:function(){return this._converter||(this._converter=new db),this._converter}},{eClass:u.EOperation,eType:u.JSObject,upperBound:1,name:"toJSON",_:function(){var a={total:this.get("resources").size(),resources:[]};return this.get("resources").each(function(b){a.resources.push({uri:b.get("uri"),length:b.get("contents").size(),contents:b.get("contents").map(function(a){return{eURI:a.eURI(),eClass:a.eClass.eURI()}})})}),a}},{eClass:u.EOperation,name:"parse",_:function(a){a&&a.resources&&t.each(a.resources,function(a){a.uri&&resourceSet.create({uri:a.uri})},this)}}]});cb.getEStructuralFeature("resourceSet").set("eType",eb);var fb=u.EPackage.create({name:"resources",nsPrefix:"resources",nsURI:"http://www.eclipselabs.org/ecore/2012/resources",eClassifiers:[eb,cb]});u.Resource.create({uri:u.EcorePackage.get("nsURI")}).add(u.EcorePackage),u.Resource.create({uri:fb.get("nsURI")}).add(fb),u.EPackage.Registry.register(fb),u.Edit={childTypes:j,siblingTypes:k,childDescriptors:m,siblingDescriptors:n,choiceOfValues:q,_get:function(a,b){if(!b||!b.eClass)return null;var c=b.eClass.get("name");return this[c]?"function"==typeof this[c][a]?this[c][a](b):this[c][a]:b.eClass.get("name")},text:function(a){return this._get("text",a)},icon:function(a){return this._get("icon",a)},label:function(a){return this._get("label",a)},EClass:{text:o,label:o,icon:"icon-EClass"},EDataType:{text:o,label:o,icon:"icon-EDataType"},EEnum:{text:o,label:o,icon:"icon-EEnum"},EEnumLiteral:{text:function(a){return a.get("name")+" = "+a.get("value")},label:o,icon:"icon-EEnumLiteral"},EAttribute:{text:p,label:o,icon:"icon-EAttribute"},EReference:{text:p,label:o,icon:"icon-EReference"},EOperation:{text:p,label:o,icon:"icon-EOperation"},EPackage:{text:o,label:o,icon:"icon-EPackage"},EAnnotation:{text:function(a){return a.get("source")},label:function(a){return a.get("source")},icon:"icon-EAnnotation"},EStringToStringMapEntry:{text:function(a){return a.get("key")+" -> "+a.get("value")},label:function(a){return a.get("key")},icon:"icon-EStringToStringMapEntry"},ResourceSet:{text:"resourceSet",label:"",icon:"icon-EObject"},Resource:{text:function(a){return a.get("uri")},label:function(a){return a.get("uri")},icon:"icon-EObject"}},"function"==typeof require?u.sax=require("sax"):u.sax=s.sax,u.XMI={dataType:"xml",contentType:"application/xml",parse:function(a,b){function c(a){a&&t.each(a,function(a,b){if(-1!==b.indexOf(":")){var c=b.split(":");"xmlns"===c[0]&&n.push({prefix:c[1],uri:a})}})}function d(a){var b=t.find(n,function(b){return b.prefix===a});return b?b.uri:null}function e(a){return f(a.name)}function f(a){return-1!==a.indexOf(":")}function g(a){var b=a.split(":"),c=b[0],e=b[1];return d(c)+"#//"+e}function h(a){var b;if(a.parent&&a.parent.eObject){var c,d=j.parent.eObject,e=a.name,f=d.eClass.getEStructuralFeature(e);if(f&&f.get){c=f.get("eType");var h=a.attributes["xsi:type"];b=h?m.getEObject(g(h)):c}}return b}function i(a){return e(a)?m.getEObject(g(a.name)):h(a)}if(!u.sax)throw new Error("Sax is missing.");var j,k,l=u.sax.parser(!0),m=a.get("resourceSet")||u.ResourceSet.create(),n=[],o=[];l.ontext=function(a){j&&j.waitingForAttributeText&&j.parent.eObject.set(j.name,a)},l.onopentag=function(b){var d,e,f,g;if(c(b.attributes),b.children=[],b.parent=j,b.parent&&b.parent.children.push(b),j=b,d=i(b)){if(j.parent&&j.parent.eObject&&j.parent.eObject.eClass.getEStructuralFeature(b.name).isTypeOf("EAttribute"))b.waitingForAttributeText=!0;else if(e=j.eObject=u.create(d),k||(k=e),t.each(b.attributes,function(a,b){e.has(b)&&(f=e.eClass.getEStructuralFeature(b),f.isTypeOf("EAttribute")?e.set(b,a):o.push({parent:e,feature:f,value:a})),"xmi:id"===b&&(e._id=a)}),b.parent)if((g=b.parent.eObject)&&g.has(b.name))if(f=g.eClass.getEStructuralFeature(b.name),f.get("containment"))1===f.get("upperBound")?g.set(b.name,e):g.get(b.name).add(e);else{var h=b.attributes,l=h?h.href:null;l&&o.push({parent:g,feature:f,value:l})}else k&&k!==e&&(a.add(k),k=e)}else if(void 0===d)throw new Error(b.name+" has undefined/invalid eClass.")},
l.onclosetag=function(a){var b;j&&j.parent&&(b=j.parent,delete j.parent,j=b)},l.write(b).close(),a.add(k),function(){function b(a){return"/"===a.substring(0,1)}function c(a,c,e){var f,g=e.split(/\s/),h=1!==c.get("upperBound");"ecore:EDataType"===g[0]&&g.shift(),t.each(g,function(e){if("#"===e[0]&&(e=e.substring(1,e.length)),b(e)?f=d[e]:null===(f=m.getEObject(e))&&console.log("Warning: "+e+" is an unresolved reference"),f)h?a.get(c.get("name")).add(f):a.set(c.get("name"),f);else if(void 0===f)throw new Error("Undefined reference: "+e)})}var d=a._index();t.each(o,function(a){c(a.parent,a.feature,a.value)})}()},to:function(a,b){function c(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return a.replace(/[&<>"']/g,function(a){return b[a]})}function d(a,b){g+="<";var h;h=a.eContainingFeature&&a.eContainingFeature!==i?a.eContainingFeature.get("name"):e+":"+a.eClass.get("name"),g+=h,a.eContainer.isKindOf("Resource")?b&&(g+=' xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI"',g+=' xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"',g+=" xmlns:"+e+'="'+f+'"'):a.eContainingFeature.get("eType")!==a.eClass&&(g+=' xsi:type="',g+=e+":"+a.eClass.get("name")+'"');var j=a.eClass.get("eAllStructuralFeatures"),k=t.filter(j,function(b){return!b.get("derived")&&b.isTypeOf("EAttribute")&&a.isSet(b.get("name"))}),l=t.filter(j,function(b){return!b.get("derived")&&b.isTypeOf("EReference")&&!b.get("containment")&&a.isSet(b.get("name"))});a._id&&(g+=' xmi:id="'+a._id+'"'),t.each(k,function(b){var d=b.get("name"),e=a.get(d);void 0!==e&&"false"!==e&&(g+=" "+d+'="',g+="string"==typeof e?c(e):e,g+='"')});var m=[];if(t.each(l,function(b){var c=a.get(b.get("name")),d=c instanceof u.EList?c.array():c?[c]:[],e=t.filter(d,function(b){return b.eResource()!==a.eResource()});e.length&&m.push({feature:b,refs:e});var f=t.difference(d,e),h=t.map(f,function(a){return a.fragment()});h.length&&(g+=" "+b.get("name")+'="'+h.join(" ")+'"')}),0===a.eContents().length&&0===m.length)g+="/>";else{g+=">",t.each(m,function(a){var b,c=a.feature,d=a.refs,e=c.get("eType").get("abstract");t.each(d,function(a){g+="<"+c.get("name"),e&&(b=a.eClass.eContainer.get("nsPrefix"),g+=' xsi:type="'+(b?b+":":"")+a.eClass.get("name")+'"'),g+=' href="'+a.eURI()+'" />'})});var n=t.filter(j,function(b){return b.isTypeOf("EReference")&&b.get("containment")&&a.isSet(b.get("name"))});t.each(n,function(b){var c=a.get(b.get("name"));1!==b.get("upperBound")?c.each(function(a){d(a)}):d(c)}),g+="</"+h+">"}return g}var e,f,g="",h=a.get("contents").array(),i=u.Resource.getEStructuralFeature("contents");if(1===h.length)e=h[0].eClass.eContainer.get("nsPrefix"),f=h[0].eClass.eContainer.get("nsURI"),d(h[0],!0);else{var j={};for(var k in h)e=h[k].eClass.eContainer.get("nsPrefix"),f=h[k].eClass.eContainer.get("nsURI"),j[e]=f,d(h[k]);var l="";for(var m in j)l+=" xmlns:"+m+'="'+j[m]+'"';g='<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"'+l+">"+g+"</xmi:XMI>"}return g=b?r(g):g,g='<?xml version="1.0" encoding="UTF-8"?>\n'+g}}}).call(this);